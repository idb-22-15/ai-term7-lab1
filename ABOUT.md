# Детектор объектов на основе ORB

## Обзор

Это веб-приложение для детекции объектов в реальном времени с использованием камеры компьютера. Приложение использует алгоритм ORB (Oriented FAST and Rotated BRIEF) из библиотеки OpenCV.js для поиска и отслеживания объектов на видеопотоке.

## Как это работает

### 1. Подготовка эталонного изображения
- Пользователь загружает изображение объекта, который нужно найти
- Система автоматически извлекает ключевые точки (особые точки) и их дескрипторы из эталонного изображения
- Ключевые точки отображаются красными маркерами на эталонном изображении

### 2. Обработка видеопотока
- Приложение получает доступ к камере пользователя
- Каждый кадр видео анализируется в реальном времени
- Для каждого кадра находятся ключевые точки и их дескрипторы

### 3. Сопоставление и детекция
- Система сопоставляет дескрипторы эталона с дескрипторами текущего кадра
- Используется алгоритм Brute Force с Hamming расстоянием для поиска совпадений
- Лучшие совпадения (топ 50%) отбираются для дальнейшего анализа

### 4. Определение положения объекта
- Если найдено достаточно хороших совпадений (минимум 4), вычисляется гомография
- Гомография - это преобразование координат эталона в координаты сцены
- На основе гомографии определяется положение объекта на кадре и рисуется зеленая рамка

### 5. Визуализация
- **Синие точки** - все ключевые точки, найденные на кадре
- **Голубые точки** - ключевые точки, совпавшие с эталоном
- **Зеленая рамка** - границы найденного объекта
- **Визуализация совпадений** - отдельное окно с эталоном и кадром, соединенные линиями

## Руководство пользователя

### Шаг 1: Подготовка
1. Откройте страницу детектора объектов
2. Разрешите доступ к камере когда браузер запросит разрешение
3. Дождитесь пока камера будет готова (индикатор станет зеленым)

### Шаг 2: Загрузка эталона
1. Нажмите кнопку "Выбрать файл" в разделе управления
2. Выберите изображение объекта, который хотите найти
3. Эталонное изображение появится справа с красными маркерами ключевых точек

### Шаг 3: Запуск детекции
1. Убедитесь что камера готова и эталон загружен
2. Нажмите кнопку "Начать анализ"
3. Система начнет анализировать видеопоток в реальном времени

### Шаг 4: Наблюдение за результатами
- Основное окно показывает видеопоток с результатами детекции
- Если объект найден, он будет обведен зеленой рамкой
- Внизу появится визуализация совпадений между эталоном и кадром

### Шаг 5: Остановка
1. Нажмите кнопку "Остановить" для прекращения детекции
2. Можно загрузить другой эталон и начать новый поиск

## Технические детали

### Алгоритм ORB
- **FAST** - быстрый детектор углов для поиска ключевых точек
- **BRIEF** - быстрый дескриптор для описания точек
- **Ориентация** - учитывает поворот объекта
- **Масштаб** - устойчив к изменению размера объекта

### Параметры системы
- Минимальное количество совпадений: 4
- Качество совпадений: топ 50% от всех найденных
- RANSAC порог для гомографии: 5.0
- Максимальное количество отображаемых совпадений: 30

### Цветовая схема
- **Красные маркеры** - ключевые точки на эталоне
- **Синие маркеры** - все ключевые точки на видео
- **Голубые маркеры** - совпавшие ключевые точки на видео
- **Зеленые линии** - лучшие совпадения (топ 10)
- **Желтые линии** - хорошие совпадения
- **Зеленая рамка** - границы найденного объекта

## Советы по использованию

### Для лучших результатов:
1. Используйте эталонные изображения с хорошим контрастом и текстурой
2. Избегайте очень простых или однородных изображений
3. Убедитесь что освещение при поиске похоже на освещение эталона
4. Объект должен быть достаточно крупным в кадре

### Ограничения:
- Алгоритм работает лучше с текстурными объектами
- Сильные изменения освещения могут повлиять на точность
- Очень быстрые движения могут затруднить отслеживание
- Прозрачные или отражающие объекты могут детектироваться плохо

## Требования к системе
- Современный браузер с поддержкой WebRTC
- Доступ к камере
- JavaScript включен
- Рекомендуется использовать Chrome, Firefox или Edge